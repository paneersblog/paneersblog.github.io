<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>MCNP5入门（一） | Paneer&#39;s blog</title>
  <meta name="description" content="MCNP5入门搬运学习，搬砖永无止境">
<meta property="og:type" content="article">
<meta property="og:title" content="MCNP5入门（一）">
<meta property="og:url" content="http://paneersblog.github.io/54952.html">
<meta property="og:site_name" content="Panner&amp;Emily’s paradise!">
<meta property="og:description" content="MCNP5入门搬运学习，搬砖永无止境">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://paneersblog.github.io/54952/uTools_1649138657812.png">
<meta property="og:image" content="http://paneersblog.github.io/54952/uTools_1649142670082.png">
<meta property="og:image" content="http://paneersblog.github.io/54952/cell.png">
<meta property="og:image" content="http://paneersblog.github.io/54952/%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97.png">
<meta property="og:image" content="http://paneersblog.github.io/54952/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png">
<meta property="article:published_time" content="2022-04-05T07:47:05.000Z">
<meta property="article:modified_time" content="2022-04-05T10:33:39.117Z">
<meta property="article:author" content="Paneer &amp; Emily">
<meta property="article:tag" content="MCNP5">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://paneersblog.github.io/54952/uTools_1649138657812.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://paneersblog.github.io/54952.html">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
    <link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet">
  
  
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Panner&Emily’s paradise!" type="application/atom+xml">
</head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/paneersblog" target="_blank">
          <img class="img-circle img-rotate" src="/images/IMG_4556.JPG" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Paneer</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">一个成熟稳重的沙雕网友</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shandong, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-播放列表">
          <a href="/playlist">
            
            <i class="icon icon-book-fill"></i>
            
            <span class="menu-title">menu.播放列表</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/paneersblog" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://weibo.com/u/6203293798" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/Paneer_007" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%94%BB%E7%95%A5/">攻略</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95%E9%A1%B5/">测试页</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0/">英语学习</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%AD%A6%E4%B9%A0/">软件学习</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOS/" rel="tag">DOS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCNP5/" rel="tag">MCNP5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matlab/" rel="tag">Matlab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Photo/" rel="tag">Photo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SRIM/" rel="tag">SRIM</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trip/" rel="tag">Trip</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WordList-E/" rel="tag">WordList_E</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WordList-P/" rel="tag">WordList_P</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/DOS/" style="font-size: 13.33px;">DOS</a> <a href="/tags/Linux/" style="font-size: 13px;">Linux</a> <a href="/tags/MCNP5/" style="font-size: 13px;">MCNP5</a> <a href="/tags/Markdown/" style="font-size: 13px;">Markdown</a> <a href="/tags/Matlab/" style="font-size: 13px;">Matlab</a> <a href="/tags/Photo/" style="font-size: 13px;">Photo</a> <a href="/tags/Python/" style="font-size: 14px;">Python</a> <a href="/tags/SRIM/" style="font-size: 13.67px;">SRIM</a> <a href="/tags/Trip/" style="font-size: 13.33px;">Trip</a> <a href="/tags/WordList-E/" style="font-size: 13px;">WordList_E</a> <a href="/tags/WordList-P/" style="font-size: 13px;">WordList_P</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
              </p>
              <p class="item-title">
                <a href="/21165.html" class="title">Python入门笔记（九）</a>
              </p>
              <p class="item-date">
                <time datetime="2022-07-23T13:30:18.000Z" itemprop="datePublished">2022-07-23</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
              </p>
              <p class="item-title">
                <a href="/3827.html" class="title">Python入门笔记（八）</a>
              </p>
              <p class="item-date">
                <time datetime="2022-07-23T08:43:13.000Z" itemprop="datePublished">2022-07-23</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
              </p>
              <p class="item-title">
                <a href="/47766.html" class="title">Python入门笔记（七）</a>
              </p>
              <p class="item-date">
                <time datetime="2022-07-22T06:20:09.000Z" itemprop="datePublished">2022-07-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
              </p>
              <p class="item-title">
                <a href="/34547.html" class="title">Python入门笔记（六）</a>
              </p>
              <p class="item-date">
                <time datetime="2022-07-20T09:57:32.000Z" itemprop="datePublished">2022-07-20</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%AD%A6%E4%B9%A0/">软件学习</a>
              </p>
              <p class="item-title">
                <a href="/16606.html" class="title">Anaconda（一）</a>
              </p>
              <p class="item-date">
                <time datetime="2022-07-19T10:11:02.000Z" itemprop="datePublished">2022-07-19</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-MCNP5入门（一）" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      MCNP5入门（一）
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/54952.html" class="article-date">
	  <time datetime="2022-04-05T07:47:05.000Z" itemprop="datePublished">2022-04-05</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/MCNP5/" rel="tag">MCNP5</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/54952.html#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 6.4k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 24(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>MCNP5入门搬运学习，搬砖永无止境</p>
<span id="more"></span>
<h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>因为有童鞋要用MCNP做毕业设计，且求助于我（orz我何德何能！）</p>
<p>我对于MCNP也仅仅是停留在“勉强会用”这一水平，故从<a target="_blank" rel="noopener" href="http://hejishult.com/">核技术论坛</a>中搬运学习MCNP5的相关知识，并结合自己的理解，完成了此篇笔记。</p>
<p>AAAAND，希望大家能给自己的电脑装一个好用的文本编辑器（推荐<a target="_blank" rel="noopener" href="https://code.visualstudio.com/">vs code</a>！yyds！）<br>vs code的好处就是它可以装很多的扩展，用来提高文件的可读性（代码高亮之类）。至于怎么安装扩展，可以百度vs code汉化教程，因为汉化就是给软件安装简体中文扩展。</p>
<img src="/54952/uTools_1649138657812.png" class="">

<blockquote>
<p>注：此笔记中提及的软件等请自行寻找，恕不提供。</p>
</blockquote>
<hr>
<h1 id="MCNP概述"><a href="#MCNP概述" class="headerlink" title="MCNP概述"></a>MCNP概述</h1><h2 id="MCNP文件结构"><a href="#MCNP文件结构" class="headerlink" title="MCNP文件结构"></a>MCNP文件结构</h2><p>MCNP的输入文件名不可以多于七个字符，所以不建议对输入文件增加扩展名；MCNP的输出文件的扩展名为.o；MCNP内部计算过程的记录文件的扩展名为.r。*.r 文件一般用于断点计算，在基于上一次的计算结果继续模拟计算时，MCNP将不会读取输入文件，而只读取.r文件的信息。<br>除了上面三种常用的文件类型，MCNP还有两种不长用的输出文件。这两种文件只有用户通过输入文件要求MCNP输出这些文件时才会得到。其中一个为.w文件，这个文件是我们想通过MCNP输出surface source 的时候才会产生；另外一个为.p文件，这个文件时我们想通过MCNP追踪粒子的输运过程的时候才会得到。</p>
<p>以上几个文件是常用的用户文件，下面将介绍MCNP程序内部使用的若干文件。</p>
<ol>
<li>MCNP5.exe 这是MCNP的应用程序，此程序不能双击打开，只能在DOS（cmd）下运行。</li>
<li>vise.exe 此程序为绘图程序，可以让user观察我们在输入文件中所建立的计算模型（相对于抽象的珊元曲面卡，能可视化检查真的很不错！）。</li>
<li>MCNPDate 该目录存放的是MCNP的截面库。</li>
<li>xs52 该文件说明了各个核素的属性，包括质量，截面库内各种反应类型对应的截面存放的位置等。</li>
<li>X11.dll dll文件，链接动态数据库，重要性不言而喻。</li>
</ol>
<p>为了更好的在dos下运行mcnp，我们可以编写一些bat文件。关于bat语法可以关注我之前的博客，或者csdn等寻找学习。</p>
<blockquote>
<p>注，使用bat文件时应确保环境变量已经被添加，环境变量中path中的路径决定能不能运行.cmd</p>
</blockquote>
<h2 id="MCNP使用方法"><a href="#MCNP使用方法" class="headerlink" title="MCNP使用方法"></a>MCNP使用方法</h2><p>上文我们说到 xs52 文件很重要，但如果你的MCNP为绿色免安装版本的话，还需要对该文件进行简单的修改才能让MCNP找到截面库。<br>我们用记事本打开xs52，可以看到第一行为datapath&#x3D;X:\LANL\MCNPDATA\。我们需要正确的修改该路径，例如我将我的 LANL文件夹放在了D盘根目录，此时这里的路径就是：D:\LANL\MCNPDATA\<br>经过上述修改之后，我们就能使用MCNP程序来进行计算了。MCNP进行计算时会占据单个cpu的资源，大家的电脑都是多核的，不用担心MCNP会占用太多资源。若想提高计算效率可以使用mpi并行计算，我尝试过一次但并没有成功orz，大家感兴趣可以自行了解尝试。</p>
<h2 id="MCNP-输入文件书写方法"><a href="#MCNP-输入文件书写方法" class="headerlink" title="MCNP 输入文件书写方法"></a>MCNP 输入文件书写方法</h2><h3 id="输入文件规范"><a href="#输入文件规范" class="headerlink" title="输入文件规范"></a>输入文件规范</h3><p>MCNP的输入文件在结构上基本上可以分为三块，分别为cell块、surface块和其他内容。块内除了注释外，不得有空行，而两个块之间只能有一个空行。通常情况下，每一行中只能有一个主导性的助记符，这个助记符可以有很多参数和附属的次要助记符。MCNP官方手册中称这样的助记符为卡(card)。每一列不得超过80个字符，若书写不下时，可以在行尾写入 &amp;符号，并从下行继续书写。</p>
<p>输入文件的<em><strong>第一行</strong></em>不论写了什么都会被MCNP忽略掉，这一行的作用是方便用户给这个输入文件做一些备注。</p>
<p>输入文件中有两种注释方法，助记符分别为<code>c </code>(c后有一个空格)和<code>$</code>符号。在第一行写c就是把这一行都注释掉；在某一行的某列上写<code>$</code>就是注释该行该列后的内容。但是即使是注释， 也不能超过每一列80个字符（包括空格）的要求。</p>
<p>还有三个常用的助记符，分别为r，i，j。r代表的是repeat，例如1 3r 就等于写了 1 1 1 1；i代表线性插入点，例如 1 2i 4 就等于写了 1 2 3 4；j代表的是jump，表示该位置使用默认值，例如1 j 2就等于写了 1 默认值 2，多用于描述重要性部分。</p>
<h3 id="算例：7MeV轫致辐射X射线角分布、能谱"><a href="#算例：7MeV轫致辐射X射线角分布、能谱" class="headerlink" title="算例：7MeV轫致辐射X射线角分布、能谱"></a>算例：7MeV轫致辐射X射线角分布、能谱</h3><p>在书写MCNP输入文件前，我们首先想好要计算的模型，包括坐标系以及各个物体在这个坐标系内的相对位置。我的计算模型如下图所示。  </p>
<img src="/54952/uTools_1649142670082.png" class="">

<p>计算模型中感兴区是半径为100cm的球内，源是能量为7MeV，位置在(-2,0,0)的单向电子束；X射线靶是半径（Y或者Z方向）1cm，高度(X方向)1cm的金；其他位置均为真空。记录面设置在圈定感兴区的球面上。</p>
<h4 id="surface-card"><a href="#surface-card" class="headerlink" title="surface card"></a>surface card</h4><p>为了描述出上述模型，我们首先写surface模块，这里需要定义的surface有：</p>
<ol>
<li>源所在面</li>
<li>Au的三个表面（两个底面和一个侧面）</li>
<li>圈定感兴趣的球面</li>
<li>划分感兴趣区域表面的记录面</li>
</ol>
<p>源所在面书写方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1    PX   -2  </span><br><span class="line">C 第一个1是指这个面的序号，在cell模块会用到。PX为助记符，表示垂直于X轴的面。-2是该面在X轴上的轴距。</span><br></pre></td></tr></table></figure>

<p>同理可得Au的三个面分别为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2    PX   0</span><br><span class="line">3    PX   1</span><br><span class="line">4    CX   1   </span><br><span class="line">C CX指的是轴心是X轴的圆柱面，1代表半径</span><br></pre></td></tr></table></figure>

<p>圈定感兴趣的区域的面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">100  SO   100   </span><br><span class="line">C 第一个100还是面的序号，定义面序号时不需要连续的定义，但要保证定义顺序递增。so代表的是圆心在原点的球面，后面的100就是指半径</span><br></pre></td></tr></table></figure>

<p>除了上述的面，为了将记录面分割成若干个小面，我们需要额外定义一些分割用辅助面，此处我定义若干圆锥体来分割，以第一个为例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">30   KX   0 0.234567901 1   </span><br><span class="line">C KX指的是轴心是X轴的圆锥面，0代表顶点在原点，0.234567901代表圆锥顶角的tan值平方。这样的圆锥有两叶，分别在Z&gt;0和Z&lt;0，所以最后的1代表的是我们所需要的Z&gt;0的部分</span><br></pre></td></tr></table></figure>

<h4 id="cell-card"><a href="#cell-card" class="headerlink" title="cell card"></a>cell card</h4><p>有了这些surface之后我们就能来书写cell部分了。<br>栅元卡有四列数据构成：</p>
<ol>
<li>栅元号，栅元号是定义栅元的标识符，相当于给栅元编个号，取个名字。栅元号取值区间[1,99999]。</li>
<li>材料号，材料号指明了该栅元是由几号材料组成的，同时需要在数据卡的材料卡里对各种材料进行详细说明。0代表真空，不用在数据卡中说明。</li>
<li>材料密度，指出了材料的密度，加负号是质量密度(g&#x2F;cm<sup>3</sup>)，不加负号为质量密度(1024Atoms&#x2F;cm<sup>3</sup>)</li>
<li>构成曲面，指出了栅元是由那些曲面包裹而成。除了最外部的空间，各个栅元都应该是由相应曲面包裹而成的封闭几何体。</li>
</ol>
<blockquote>
<p>假如1号曲面方程为f(x,y,z)&#x3D;0，则f(x,y,z)&lt;0的部分由“-1”表示，f(x,y,z)&gt;0的部分直接由1表示。  </p>
<img src="/54952/cell.png" class="">
<p>描述栅元时还要用到布尔算符，布尔算符有三个：空格、冒号、井号。空格表示“交”，冒号表示“并”，井号表示“补”。比如100号栅元为“-1”和“-2”相交的空间。  </p>
<img src="/54952/%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97.png" class="">
</blockquote>
<hr>
<p>回到我们的算例：</p>
<ol>
<li>首先定义Au块(cell)，它由三个面围成，它们是序号分别为2，3，4。<ol>
<li>Au块由2号面的向右方向(或X轴的正方向)，3号面的向左方向（或X轴的负方向）以及4号面的内部围成。所以这个Au块（cell）的书写方法是：1 1 -19.3 2 -3 -4。</li>
<li>第一个1代表的是这个cell的序号；</li>
<li>第二个1代表的是这个cell所对应的材料种类为1，关于1号材料的定义将在后面介绍；</li>
<li>第三个-19.3中，负号代表的是实际密度，若没有负号则代表的是原子密度。所以-19.3代表的是Au块（cell）的密度是19.3g&#x2F;cm3；</li>
<li>之后的2 -3 -4 描述的是Au块是由2号面的正方向，3号面的负方向，4号面的内部围成的。</li>
</ol>
</li>
<li>源不是一个物体，所以不需要在cell块中定义。而在感兴趣内，除了Au块（cell），其他位置均为真空。<ol>
<li>尽管是真空，我们仍需要在输入文件内把真空定义为一个物体。</li>
<li>定义的方法如下：2 0 -100 #1。</li>
<li>其中第一个2代表cell的序号；</li>
<li>第二个0代表定义的块内什么东西都没有；</li>
<li>后面的-100 #1限定了这个cell的几何空间，它表示这个块是在100号面的内部，（#助记符代表扣除的意思）除了1号cell的所有空间。</li>
</ol>
</li>
<li>我们同样需要定义感兴区外的空间，定义的方法如下：100 0 100。<ol>
<li>第一个100是这个cell的序号；</li>
<li>第二个0代表真空；</li>
<li>第三个100代表第100号面的外部。</li>
</ol>
</li>
</ol>
<p>2号cell和100号cell均为真空，区分哪一个是感兴区的方法是利用另外一个助记符imp，它代表的是importance，也就是粒子在该cell内的重要性。<br>这个助记符可以在每个cell的定义的末端写上，也可以在第三块中写入。<br>在cell末端写入的方法如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2 0 -100 #1 imp:e,p=1</span><br><span class="line">C 它代表了2号cell中电子(e)及光子(p)的重要性为1，即它是感兴区内的物体</span><br><span class="line">100 0 100 imp:e,p=0</span><br><span class="line">C 它代表了100号cell的电子及光子的重要性为0，即它在感兴区外。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>感兴区与非感兴区并不需要一定是位置划分分明的两块区域，我们可以在感兴区内设定一个非感兴区，只要粒子被输运到该区域就会被杀死（类似于黑洞）。</p>
</blockquote>
<h4 id="数据卡"><a href="#数据卡" class="headerlink" title="数据卡"></a>数据卡</h4><p>最后我们需要书写第三个模块，在这个模块内将指明模拟计算中所涉及的反应类型，记录方法，运算时间限定等。</p>
<ol>
<li><p>模式卡：<code>mode e p</code></p>
<ul>
<li>这个卡说明了计算中将涉及两种粒子，分别为电子及光子。（源粒子是电子，它轰击Au块会产生轫致辐射X射线）。</li>
</ul>
</li>
<li><p>材料卡：<code>m1 79197 -1.0</code></p>
<ul>
<li>其中m1代表第一号材料，同理会有m2、m3等材料;</li>
<li>79197的格式是ZZAAA，即79是原子序数(Au)，197是质量数;</li>
<li>-1.0中负号代表的是原子个数的比重，正号则代表的是质量比重。</li>
<li>材料卡的各种核素的比重的标识中并不要求归一化，MCNP会自动给用户归一化。也就是说 <code>m1 79197 -2.0 79198 -2.0</code>与<code>m1 79197 -0.5 79198 -0.5</code> 的写法对于MCNP而言是等效的，都说明1号材料中<sup>197</sup>Au与<sup>198</sup>Au各占一半，就像SRIM。</li>
</ul>
</li>
<li><p>源定义：<code>sdef par=3 sur=1 pos=-2 0 0 vec=1 0 0 dir=1 erg=7</code></p>
<ul>
<li>其中sdef是源定义的助记符代表source definition；</li>
<li>par代表源粒子的种类，1代表中子，2代表光子，3代表电子；</li>
<li>sur代表源所在的面，上面定义中sur&#x3D;1说明源在序号为1的面上；</li>
<li>pos代表源所在的位置，按照上面的定义，源的位置为（-2,0,0）。请谨记若sur 和pos 同时被用上，请保证pos的点是在sur的面上，不然可能导致计算结果有误；</li>
<li>vec代表参考向量，向量的起始点是原点，而终止点是(1,0,0)。这说明了我们设定的参考向量就是X轴的正方向；</li>
<li>dir代表粒子出射方向与参考向量的夹角的余弦，上面定义中为1，说明了源粒子沿着X轴正方向出射；</li>
<li>erg代表源粒子的能量，按照上面的定义，源粒子的能量为7MeV。</li>
</ul>
<blockquote>
<p>关于源的定义还有许多其他的助记符以及各种分布情况，请参考MCNP的官方使用手册（或者等我填坑(o^^o)）。</p>
</blockquote>
</li>
<li><p>粒子重要性表示：<code>imp:e 1 1 0</code></p>
<ul>
<li><code>imp:e</code>代表了这张卡描述的是各个cell中电子的重要性</li>
<li><code>1 1 0</code>代表了在cell块中写的各个cell（以书写顺序）的重要性分别为1、1、0。这说明了cell块中第三个描述的cell（cell的序号可能不是三，只是代表它是第三个被定义的cell。）是电子的黑洞，只要电子被输运到这个cell就会被杀死，停止输运。同理我们还可以定义imp:p 1 1 0。</li>
<li>在前面已经描述过，这里的imp卡也可以在cell块中写入，不再赘述。</li>
</ul>
</li>
<li><p>能量截断卡：<code>cut:e j 1</code></p>
<ul>
<li>其中<code>cut</code>代表能量截断卡的助记符；</li>
<li><code>e</code>代表电子；</li>
<li><code>j</code>代表第一个参数选用默认值；</li>
<li><code>1</code>代表截断能量为1MeV。</li>
<li>这个卡的作用是当输运过程中，电子的能量小于1MeV，就杀死这个电子。</li>
<li>这样做的目的是，若我们只关心高能（&gt;1MeV）的X射线，而能量小于1MeV的电子已经不会再产生能量大于1MeV的X射线了，所以我们可以停止这些低能电子输运来节省计算机机时而且不会影响计算结果。</li>
<li>同理我们还可以写<code>cut:p j 1</code></li>
</ul>
</li>
<li><p>记录方法描述卡1：<code>F1:p 100</code></p>
<ul>
<li>其中<code>F1</code>代表的是第一种记录模式，也就是通过某个面的粒子的个数（相对于一个源粒子）；</li>
<li><code>p</code>代表记录的是光子；</li>
<li><code>100</code>代表记录面是序号为100的面。</li>
<li>故这个记录卡的作用是记录所有通过100号面的光子。</li>
</ul>
</li>
<li><p>记录方法描述2：<code>F2:p 100</code></p>
<ul>
<li>其中<code>F2</code>代表的是第二种记录模式，也就是通过某个面的粒子的注量，它等于通过面的粒子个数（相对于一个源粒子）除以该面的面积。</li>
</ul>
</li>
<li><p>记录面分割：<code>Fs2 -30 -31 -32 -33 -34 -35 -36 -37 -38 -39 40 41 42 43 44</code></p>
<ul>
<li>其中<code>Fs2</code>代表的是分割第二号记录卡的记录面（也就是分割记录第100号面）；</li>
<li>后面的<code>-30</code> 等代表分割方法，输出时MCNP会给出:<ol>
<li>100号面上，从30号面的内部（圆锥体右叶的内部）出射的粒子</li>
<li>100号面上，从30号面的外部且40号面的内部出射的粒子</li>
<li>100号面上，从30号面的外部且31号面的外部且32号面的内部出射的粒子</li>
<li>100号面上，从30号面的外部且31号面的外部且32号面的外部且33号面的内部出射的粒子。</li>
<li>以此类推</li>
</ol>
</li>
</ul>
</li>
<li><p>能量分割：我们可以对任意一个记录卡分别设置能量分割卡或所有记录卡同意设置相同的能量分割卡。</p>
<ul>
<li>这里我们将对2号记录卡设置一个能量分割卡：<code>E2 1 19i 7</code></li>
<li>其中<code>E2</code>代表这是对2号记录卡的能量分割卡，后面的<code>1 19i 7</code>代表的是分割方法，也就是在1MeV至7MeV之间插入19个点（若把E2写成E0则代表对所有记录卡使用相同的能量分割方法。）。</li>
</ul>
</li>
<li><p>计算时间设定卡：<code>ctme 10</code></p>
<ul>
<li>这个卡说明了要求MCNP计算10分钟。</li>
<li>可以想象，计算的时间越长，模拟的源粒子的个数就会越多，模拟结果就会越接近它的期望值，统计涨落就会越小。所以计算时间需要用户根据自己希望得到的统计可信度，设定计算时间。</li>
<li>除了<code>ctme</code>还有利用模拟源粒子的个数进行时间限制的方法如<code>NPS 10000</code>，它说明了需要MCNP模拟10000个源粒子的输运过程（也可以写成<code>NPS 1E4</code>）。</li>
</ul>
</li>
</ol>
<p>在这个文件中只使用了两个记录方法，分别为F1和F2。<br>MCNP中一共有8中记录方法，我们可以参考使用手册，选用适合计算模型的记录卡。</p>
<p>此外一种记录卡可以有多个记录面，只要保证记录卡的个位数是8种记录卡的一种，例如F11和F21都是第一种记录类型，即通过某个记录面的粒子个数。</p>
<p>另外请谨记，在使用F1和F2的记录卡时，记录面一定要是构成某个cell的一个面，不然MCNP不会给出记录结果，也就是说如果用户随意定义了一个面(如上面定义的某个分割面)，而且这个面没有被使用在定义某个cell上，那么我们不能期望MCNP可以记录通过这个面的粒子信息。<br>使用分割面时，其实还是记录通过那个记录面的粒子个数，分割面只是把那个记录面分割为若个块而已。</p>
<h4 id="总结-输入文件"><a href="#总结-输入文件" class="headerlink" title="总结-输入文件"></a>总结-输入文件</h4><p>总结上文，得输入文件为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">X-ray Ener=7MeV</span><br><span class="line">c cell card</span><br><span class="line">1    1  -19.3   2 -3 -4   $ Au      </span><br><span class="line">2    0 -100 #1 </span><br><span class="line">100   0 100</span><br><span class="line"></span><br><span class="line">c surface card</span><br><span class="line">c radiation source</span><br><span class="line">1    px     -2            $ 放射源所在面</span><br><span class="line">2    px     0      </span><br><span class="line">3    px     1      </span><br><span class="line">4    cx     1      </span><br><span class="line">30   kx  0  0.234567901   1</span><br><span class="line">31   kx  0  0.5625        1</span><br><span class="line">32   kx  0  1.040816327   1</span><br><span class="line">33   kx  0  1.777777778   1</span><br><span class="line">34   kx  0  3             1</span><br><span class="line">35   kx  0  5.25          1</span><br><span class="line">36   kx  0  10.11111111   1</span><br><span class="line">37   kx  0  24            1</span><br><span class="line">38   kx  0  99            1</span><br><span class="line">39   kx  0  1e33          1</span><br><span class="line">40   kx  0  99           -1</span><br><span class="line">41   kx  0  24           -1</span><br><span class="line">42   kx  0  10.11111111  -1</span><br><span class="line">43   kx  0  5.25         -1</span><br><span class="line">44   kx  0  3            -1</span><br><span class="line">45   kx  0  1.777777778  -1</span><br><span class="line">46   kx  0  1.040816327  -1</span><br><span class="line">47   kx  0  0.5625       -1</span><br><span class="line">48   kx  0  0.234567901  -1</span><br><span class="line">49   kx  0  0            -1</span><br><span class="line">100  so    100</span><br><span class="line"></span><br><span class="line">mode e p</span><br><span class="line">m1   79197 -1.0           $ Au        </span><br><span class="line">sdef par=3 sur=1 pos=-2 0 0 vec=1 0 0 dir=1 erg=7   </span><br><span class="line">imp:e 1 1 0</span><br><span class="line">imp:p 1 1 0</span><br><span class="line">cut:e j 1</span><br><span class="line">cut:p j 1</span><br><span class="line">F1:p 100</span><br><span class="line">F2:p 100</span><br><span class="line">Fs2 -30 -31 -32 -33 -34 -35 -36 -37 -38 -39 40 41 42 43 44 &amp;</span><br><span class="line"> 45 46 47 48  </span><br><span class="line">E2 1 19i 7</span><br><span class="line">ctme 10</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意，该输入文件共有两个空行，用来分割 cell card &amp; surface card &amp; data card。MCNP对于输入文件格式要求很严格，应注意。</p>
</blockquote>
<h4 id="关于vise-exe"><a href="#关于vise-exe" class="headerlink" title="关于vise.exe"></a>关于vise.exe</h4><p>我们可以利用vised.exe观察这个已经写好的输入文件的模型，如果书写有误，我们需要修改输入文件。<br>有错误时会导致vised.exe无法打开文件并被强制关闭。<br>出现这种情况时，请看输入文件的书写规范，如空行是否多了或少了等。</p>
<p>若打开后，观察到明确的红线，代表两个物体分享了一部分空间，这在MCNP中是不允许的。</p>
<p>在书写复杂的模型时，vised.exe可以帮助我们确定写出来的模型与我们想像的模型是一致的。我们应反复地观察各个方向的视图，从而确保输入文件的正确性，不然计算出来的结果就很有可能是错误的。</p>
<p>Vised.exe是windows下的应用程序，我们双击它并用它打开我们已经书写好的输入文件，就可以观察写好的模型了，操作简单不做赘述。</p>
<h2 id="输出文件解读"><a href="#输出文件解读" class="headerlink" title="输出文件解读"></a>输出文件解读</h2><p>利用MCNP 计算上面的输入文件可以得到同名的、拓展名为o的文件。使用文本编辑器打开它，搜索关键字：<code>tally</code> 找到如下部分：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1tally   1        nps =  2958959</span><br><span class="line">           tally type 1    number of particles crossing a surface.                        </span><br><span class="line">           tally for  photons  </span><br><span class="line"> </span><br><span class="line"> surface  100                                                                                                          </span><br><span class="line">                 2.90042E-01 0.0010</span><br></pre></td></tr></table></figure>

<p>这是输出文件中关于记录信息的结果部分。</p>
<ul>
<li><p><code>nps</code> 代表了一共运行了2958959个粒子的输运过程  </p>
</li>
<li><p><code>tally type 1</code> 代表记录类型是1，也就是<code>number of particles crossing a surface</code>  </p>
</li>
<li><p><code>tally for  photons</code> 代表记录的是光子  </p>
</li>
<li><p><code>surface  100</code> 代表记录的是第100号面  </p>
</li>
<li><p>记录结果是：<code>2.90042E-01 0.0010</code></p>
<ul>
<li>它代表有1个7MeV的电子轰击1cm的Au时，会有0.29个能量大于1MeV（我们在cut中限定了能量）光子透过第100号记录面，而这个数据的相对误差为0.001。</li>
</ul>
</li>
</ul>
<p>第二号记录结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1tally   2        nps =  2958959</span><br><span class="line">           tally type 2    particle flux averaged over a surface.       units   1/cm**2   </span><br><span class="line">           tally for  photons  </span><br><span class="line">           areas   </span><br><span class="line">                surface:      100                                                                                  </span><br><span class="line">               segment</span><br><span class="line">                 1       6.28319E+03</span><br><span class="line">                 2       6.28319E+03</span><br><span class="line">                 3       6.28319E+03</span><br><span class="line">                 4       6.28319E+03</span><br><span class="line">                 5       6.28319E+03</span><br><span class="line">                 6       6.28319E+03</span><br><span class="line">                 7       6.28319E+03</span><br><span class="line">                 8       6.28319E+03</span><br><span class="line">                 9       6.28319E+03</span><br><span class="line">                10       6.28319E+03</span><br><span class="line">                11       6.28319E+03</span><br><span class="line">                12       6.28319E+03</span><br><span class="line">                13       6.28319E+03</span><br><span class="line">                14       6.28319E+03</span><br><span class="line">                15       6.28319E+03</span><br><span class="line">                16       6.28319E+03</span><br><span class="line">                17       6.28319E+03</span><br><span class="line">                18       6.28319E+03</span><br><span class="line">                19       6.28319E+03</span><br><span class="line">                20       6.28319E+03</span><br><span class="line">                ......</span><br></pre></td></tr></table></figure>

<ul>
<li><code>nps</code>代表一共运行了2958959个源粒子的输运过程。</li>
<li><code>Tally type 1</code> 代表记录类型为2，也就是<code>particle flux averaged over a surface</code>，请注意它的单位是1&#x2F;cm<sup>2</sup>。</li>
<li><code>Tally for photons</code>代表的是记录的是光子。</li>
<li><code>Surface 100</code> 代表记录面是第100号面。</li>
<li><code>Segment</code> 代表的是利用分割面分割后，100号面的各个子面的面积。<blockquote>
<p>由于我们使用的等立体角分割，所以各个子面的面积均相同</p>
</blockquote>
</li>
</ul>
<p>其他记录结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">surface  100                                                                                                          </span><br><span class="line"> segment:         -30                                                                                                  </span><br><span class="line">      energy</span><br><span class="line">    1.0000E+00   0.00000E+00 0.0000</span><br><span class="line">    1.3000E+00   1.58985E-06 0.0058</span><br><span class="line">    1.6000E+00   1.25669E-06 0.0065</span><br><span class="line">    1.9000E+00   1.01556E-06 0.0073</span><br><span class="line">    2.2000E+00   8.05683E-07 0.0082</span><br><span class="line">    2.5000E+00   6.50129E-07 0.0091</span><br><span class="line">    2.8000E+00   5.29430E-07 0.0101</span><br><span class="line">    3.1000E+00   4.41488E-07 0.0110</span><br><span class="line">    3.4000E+00   3.71080E-07 0.0120</span><br><span class="line">    3.7000E+00   3.09977E-07 0.0132</span><br><span class="line">    4.0000E+00   2.59094E-07 0.0144</span><br><span class="line">    4.3000E+00   2.11708E-07 0.0159</span><br><span class="line">    4.6000E+00   1.80941E-07 0.0172</span><br><span class="line">    4.9000E+00   1.59103E-07 0.0184</span><br><span class="line">    5.2000E+00   1.31403E-07 0.0202</span><br><span class="line">    5.5000E+00   1.04079E-07 0.0227</span><br><span class="line">    5.8000E+00   8.97713E-08 0.0245</span><br><span class="line">    6.1000E+00   6.86866E-08 0.0280</span><br><span class="line">    6.4000E+00   4.88390E-08 0.0332</span><br><span class="line">    6.7000E+00   2.82384E-08 0.0436</span><br><span class="line">    7.0000E+00   1.05423E-08 0.0714</span><br><span class="line">      total      8.26230E-06 0.0025</span><br><span class="line"> </span><br><span class="line"> surface  100                                                                                                          </span><br><span class="line"> segment:          30      -31                                                                                         </span><br><span class="line">      energy</span><br><span class="line">    1.0000E+00   0.00000E+00 0.0000</span><br><span class="line">    1.3000E+00   9.48975E-07 0.0075</span><br><span class="line">    1.6000E+00   7.33985E-07 0.0086</span><br><span class="line">    1.9000E+00   5.56701E-07 0.0098</span><br><span class="line">    2.2000E+00   4.35679E-07 0.0111</span><br><span class="line">    2.5000E+00   3.35311E-07 0.0127</span><br><span class="line">    2.8000E+00   2.73079E-07 0.0140</span><br><span class="line">    3.1000E+00   2.10847E-07 0.0160</span><br><span class="line">    .....</span><br></pre></td></tr></table></figure>

<p>其中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">surface  100                                                                                                          </span><br><span class="line">        segment:         -30</span><br></pre></td></tr></table></figure>

<p>代表统计的是从记录面100且从分割面30的内部（圆锥右叶的内部）通过的光子。<br>同理，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">surface  100                                                                                                          </span><br><span class="line">         segment:          30      -31     </span><br></pre></td></tr></table></figure>

<p>代表的是统计的是从记录面100且从分割面30的外部且从分割面31的内部通过的光子。</p>
<p>对于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.0000E+00   0.00000E+00 0.0000</span><br><span class="line">1.3000E+00   1.58985E-06 0.0058</span><br><span class="line">1.6000E+00   1.25669E-06 0.0065</span><br></pre></td></tr></table></figure>

<p>最左边一列代表的是能量，第二列代表的是概率，第三列代表的是第二列的相对误差。</p>
<p>对于这三行统计结果的解读如下，在相应的记录面内，</p>
<ul>
<li>能量为0~1MeV的光子的注量为0，这是因为我们把能量小于1MeV的光子都杀死了（利用cut卡）。</li>
<li>能量为1~1.3MeV的光子的注量为1.58985E-6，单位是1&#x2F;cm<sup>2</sup>，且是相对于一个电子。</li>
<li>能量为1.3~1.6MeV的光子的注量为1.25669E-06，单位是1&#x2F;cm<sup>2</sup>，且是相对于一个电子。</li>
<li>以此类推。</li>
</ul>
<h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>感觉没啥可写的了，剩下的都在手册里或者不难找到。有啥疑问我们评论区聊（评论托管服务器在国外，可能会偶尔渲染不出来大家可以试着多进几次）。</p>
<h3 id="关于使用bat文件配置环境变量的问题"><a href="#关于使用bat文件配置环境变量的问题" class="headerlink" title="关于使用bat文件配置环境变量的问题"></a>关于使用bat文件配置环境变量的问题</h3><p>我们可以使用快捷键 WIN+S 搜索<code>环境变量</code>，打开<code>编辑环境变量</code>进入如下截面：</p>
<img src="/54952/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" class="">
<p>首先双击 Path，然后点击新建，将bat文件<strong>注意是bat文件</strong>所在的路径添加进去。该操作的意义是只有在Path内的路径才能使用cmd。<br>bat文件可以不放在MCNP根目录，只要确保bat文件与输入文件在同一目录下即可。</p>
<p>最后的最后，附上我写的bat文件(可以删除中间文件)，大家看看能不能用～</p>
<p>calculate：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">::设置输入文件和输出结果文件名</span><br><span class="line"><span class="built_in">set</span> inp=test.i</span><br><span class="line"><span class="built_in">set</span> outp=test.o</span><br><span class="line"></span><br><span class="line">::删除旧文件</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span>  <span class="variable">%outp%</span>    <span class="built_in">del</span> <span class="variable">%outp%</span></span><br><span class="line"></span><br><span class="line">::调用MCNP开始计算</span><br><span class="line"><span class="keyword">call</span> mcnp5.exe i=<span class="variable">%inp%</span> o=<span class="variable">%outp%</span></span><br><span class="line"></span><br><span class="line">::删除各类中间备份转储文件(应该是这么几个)</span><br><span class="line"><span class="built_in">del</span> runtp*</span><br><span class="line"><span class="built_in">del</span> dcinp</span><br><span class="line"><span class="built_in">del</span> ddinp</span><br><span class="line"><span class="built_in">del</span> dfill</span><br><span class="line"><span class="built_in">del</span> inp </span><br><span class="line"><span class="built_in">del</span> out*</span><br><span class="line"><span class="built_in">del</span> *.sav</span><br></pre></td></tr></table></figure>

<p>draw：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> vised.exe</span><br><span class="line"></span><br><span class="line"><span class="built_in">del</span> *.o</span><br><span class="line"><span class="built_in">del</span> runtp*</span><br><span class="line"></span><br><span class="line"><span class="built_in">del</span> dcinp</span><br><span class="line"><span class="built_in">del</span> ddinp</span><br><span class="line"><span class="built_in">del</span> dfill</span><br><span class="line"><span class="built_in">del</span> inp </span><br><span class="line"><span class="built_in">del</span> out*</span><br><span class="line"><span class="built_in">del</span> *.sav</span><br></pre></td></tr></table></figure>
      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://paneersblog.github.io/54952.html" title="MCNP5入门（一）" target="_blank" rel="external">http://paneersblog.github.io/54952.html</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/paneersblog" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/IMG_4556.JPG" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/paneersblog" target="_blank"><span class="text-dark">Paneer</span><small class="ml-1x">一个成熟稳重的沙雕网友</small></a></h3>
        <div>搬砖永无止境</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/16606.html" title="Anaconda（一）"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/28793.html" title="Chapter_1"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/paneersblog" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://weibo.com/u/6203293798" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/Paneer_007" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2022 Paneer &amp; Emily
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: 'IhVNOCA6KMiSCGQQEJHuNj18-gzGzoHsz',
    appKey: 'M7KF1RwFGcFcF2RThCWkSCOj',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     



  <script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script>
  <script>
  //利用 FancyBox 实现点击图片放大
  $(document).ready(function() {
    $('article img').not('[hidden]').not('.panel-body img').each(function() {
      var $image = $(this);
      var imageCaption = $image.attr('alt');
      var $imageWrapLink = $image.parent('a');
      if ($imageWrapLink.length < 1) {
        var src = this.getAttribute('src');
        var idx = src.lastIndexOf('?');
        if (idx != -1) {
          src = src.substring(0, idx);
        }
        $imageWrapLink = $image.wrap('<a href="' + src + '"></a>').parent('a');
      }
      $imageWrapLink.attr('data-fancybox', 'images');
      if (imageCaption) {
        $imageWrapLink.attr('data-caption', imageCaption);
      }
    });
    $().fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
    });
  });
  </script>





</body>
</html>